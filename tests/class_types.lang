// Test Type Classes for List, Tuple, Record

trait Show<T> {
    fun show(x: T) -> String
}

// 1. Implementation for List (generic)
// Note: String is List Char, so this should apply to String too unless overridden?
instance Show (List<Int>) {
    fun show(l: List<Int>) -> String {
        "List[Int]"
    }
}

// 2. Implementation for Tuple
instance Show (Int, Int) {
    fun show(t: (Int, Int)) -> String {
        "Tuple(Int, Int)"
    }
}

// 3. Implementation for Record
// Note: Anonymous record type
instance Show { x: Int, y: Int } {
    fun show(r: { x: Int, y: Int }) -> String {
        "Record{x, y}"
    }
}

// 4. Implementation for Int
instance Show Int {
    fun show(i: Int) -> String {
        "Integer"
    }
}

fun printShow<T: Show>(item: T) {
    print(show(item))
}

printShow(10)
printShow([1, 2, 3])
printShow((1, 2))
printShow({x: 1, y: 2})

// Test dynamic dispatch without generics wrapper
print(show(100))
print(show([1]))
print(show((10, 20)))
print(show({x: 10, y: 20}))

